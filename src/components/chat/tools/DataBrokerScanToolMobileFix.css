/* CyberForget Mobile Layout Fixes - January 2025 */

/* CRITICAL FIX: Trust indicators taking too much space on mobile */
@media (max-width: 768px) {
  /* Override trust indicators with maximum specificity */
  .data-broker-scan-tool .trust-indicators.single-bar,
  .inline-tool-renderer .trust-indicators.single-bar,
  .enterprise-scanning-display .trust-indicators.single-bar {
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 1px 2px !important;
    gap: 1px !important;
    width: 100% !important;
    margin: 2px 0 4px 0 !important;
    min-height: 18px !important;
    max-height: 18px !important;
    overflow: hidden !important;
    background: rgba(66, 255, 181, 0.03) !important;
    border-radius: 8px !important;
    flex-wrap: nowrap !important;
  }
  
  .data-broker-scan-tool .trust-indicators.single-bar .trust-badge,
  .inline-tool-renderer .trust-indicators.single-bar .trust-badge,
  .enterprise-scanning-display .trust-indicators.single-bar .trust-badge {
    flex: 1 1 0 !important;
    text-align: center !important;
    margin: 0 !important;
    font-size: 0 !important;
    padding: 1px !important;
    max-width: 33.333% !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    line-height: 1 !important;
    border-radius: 4px !important;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    min-width: 0 !important;
    width: auto !important;
  }
  
  /* Use ::after to show compact text */
  .trust-indicators.single-bar .trust-badge:nth-child(1) {
    font-size: 0 !important;
  }
  .trust-indicators.single-bar .trust-badge:nth-child(1)::after {
    content: "ðŸ”’ Safe" !important;
    font-size: 8px !important;
    color: rgba(255, 255, 255, 0.8) !important;
    display: block !important;
  }
  
  .trust-indicators.single-bar .trust-badge:nth-child(2) {
    font-size: 0 !important;
  }
  .trust-indicators.single-bar .trust-badge:nth-child(2)::after {
    content: "âœ“ 2M+" !important;
    font-size: 8px !important;
    color: rgba(255, 255, 255, 0.8) !important;
    display: block !important;
  }
  
  .trust-indicators.single-bar .trust-badge:nth-child(3) {
    font-size: 0 !important;
  }
  .trust-indicators.single-bar .trust-badge:nth-child(3)::after {
    content: "âš¡ Fast" !important;
    font-size: 8px !important;
    color: rgba(255, 255, 255, 0.8) !important;
    display: block !important;
  }
}

/* Extra small screens - even more compact */
@media (max-width: 430px) {
  .trust-indicators.single-bar {
    min-height: 16px !important;
    max-height: 16px !important;
    margin: 1px 0 3px 0 !important;
  }
  
  .trust-indicators.single-bar .trust-badge:nth-child(1)::after {
    content: "ðŸ”’" !important;
    font-size: 7px !important;
  }
  
  .trust-indicators.single-bar .trust-badge:nth-child(2)::after {
    content: "âœ“2M" !important;
    font-size: 7px !important;
  }
  
  .trust-indicators.single-bar .trust-badge:nth-child(3)::after {
    content: "âš¡60s" !important;
    font-size: 7px !important;
  }
}

/* CRITICAL FIX: Keyboard viewport blank space issue */
@media (max-width: 768px) {
  /* Fix chat page using proper viewport units */
  .chat-page {
    min-height: 100vh !important;
    min-height: 100svh !important; /* Safe area viewport height */
    height: auto !important;
    padding-top: 88px !important; /* Mobile header height */
  }
  
  .chat-container {
    min-height: calc(100vh - 88px - 90px) !important;
    min-height: calc(100svh - 88px - 90px) !important; /* Safe area viewport */
    max-height: calc(100vh - 88px - 90px) !important;
    max-height: calc(100svh - 88px - 90px) !important;
    height: auto !important;
    padding: 8px 4px 80px !important;
    overflow-y: auto !important;
    box-sizing: border-box !important;
  }
  
  /* Prevent viewport jumping when keyboard opens/closes */
  body {
    position: fixed !important;
    width: 100% !important;
    height: 100% !important;
    overflow: hidden !important;
  }
  
  /* Override body when keyboard is detected */
  body.keyboard-open {
    position: static !important;
    height: auto !important;
    overflow: visible !important;
  }
  
  /* Ensure proper scrolling behavior */
  .seamless-chat-messages {
    padding: 16px 8px !important;
    gap: 16px !important; /* Reduced gap between messages */
    width: 100% !important;
    box-sizing: border-box !important;
    overflow-y: visible !important;
  }
  
  /* Compact message containers on mobile */
  .message-container {
    width: 100% !important;
    max-width: 100% !important;
    margin-bottom: 12px !important; /* Reduced spacing between messages */
  }
  
  .message-content {
    max-width: 95% !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
  }
  
  /* Compact assistant messages */
  .message-container.assistant-message .message-content {
    padding: 12px 16px !important; /* Reduced padding */
    margin-bottom: 8px !important;
    min-height: auto !important;
    box-sizing: border-box !important;
  }
  
  /* Compact user messages */
  .message-container.user-message .message-content {
    padding: 8px 12px !important; /* Reduced padding */
    margin-bottom: 6px !important;
  }
}

/* Keyboard detection helper styles */
@media (max-width: 768px) {
  /* Add class when keyboard is detected */
  .keyboard-detected {
    --vh: 1vh; /* Will be set by JavaScript */
  }
  
  .keyboard-detected .chat-page,
  .keyboard-detected .chat-container {
    height: calc(var(--vh, 1vh) * 100) !important;
    min-height: calc(var(--vh, 1vh) * 100) !important;
  }
}

/* Additional compact fixes for mobile tools */
@media (max-width: 768px) {
  /* Compact enterprise header */
  .enterprise-header.compact-header {
    padding: 4px 0 !important;
    margin-bottom: 4px !important;
  }
  
  .enterprise-header h3 {
    font-size: 14px !important;
    margin-bottom: 2px !important;
    line-height: 1.2 !important;
  }
  
  .tool-description {
    font-size: 10px !important;
    line-height: 1.3 !important;
    margin: 1px 0 !important;
  }
  
  /* Compact input sections */
  .data-broker-scan-content {
    padding: 8px 4px !important;
  }
  
  .scan-input-section {
    gap: 8px !important;
  }
  
  .required-fields-notice {
    padding: 6px 8px !important;
    margin-bottom: 8px !important;
    font-size: 11px !important;
  }
  
  /* Compact buttons */
  .scan-btn {
    padding: 8px 12px !important;
    font-size: 12px !important;
    margin-top: 6px !important;
  }
}

/* Ultra-compact for very small screens */
@media (max-width: 375px) {
  .enterprise-header h3 {
    font-size: 13px !important;
  }
  
  .tool-description {
    font-size: 9px !important;
  }
  
  .data-broker-scan-content {
    padding: 6px 2px !important;
  }
  
  .scan-btn {
    padding: 6px 8px !important;
    font-size: 11px !important;
  }
  
  .seamless-chat-messages {
    padding: 12px 4px !important;
    gap: 12px !important;
  }
}

/* Fix form input spacing on mobile */
@media (max-width: 768px) {
  .input-row {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    width: 100% !important;
  }
  
  .input-wrapper {
    width: 100% !important;
    margin-bottom: 0 !important;
  }
  
  .name-input,
  .city-input {
    width: 100% !important;
    padding: 10px 12px 10px 50px !important;
    font-size: 13px !important;
    box-sizing: border-box !important;
  }
  
  .input-icon {
    left: 16px !important;
    font-size: 12px !important;
  }
}

/* Accessibility and reduced motion */
@media (prefers-reduced-motion: reduce) {
  .trust-indicators.single-bar .trust-badge {
    transition: none !important;
    animation: none !important;
  }
  
  .message-container {
    transition: none !important;
    animation: none !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .trust-indicators.single-bar {
    border: 1px solid #42ffb5 !important;
  }
  
  .trust-indicators.single-bar .trust-badge::after {
    color: #42ffb5 !important;
  }
}